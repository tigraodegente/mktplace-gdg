import { exec } from 'child_process';
import { promisify } from 'util';

const execAsync = promisify(exec);

async function testProductPage() {
    console.log('üß™ Testando p√°gina de produto...\n');
    
    try {
        // Testar diferentes produtos
        const testProducts = [
            'almofada-amamentacao-azul-bebe-150943',
            'almofada-amamentacao-rose-150938'
        ];
        
        for (const slug of testProducts) {
            console.log(`üîç Testando: ${slug}`);
            
            try {
                const command = `curl -s -o /dev/null -w "%{http_code}" http://localhost:5173/produto/${slug}`;
                const { stdout } = await execAsync(command);
                const statusCode = stdout.trim();
                
                console.log(`   Status: ${statusCode}`);
                
                if (statusCode === '200') {
                    console.log('   ‚úÖ Sucesso - p√°gina carregou sem erros');
                } else if (statusCode === '500') {
                    console.log('   ‚ùå Erro interno - ainda h√° problemas');
                } else if (statusCode === '404') {
                    console.log('   ‚ö†Ô∏è  404 - produto n√£o encontrado');
                } else {
                    console.log(`   ‚ö†Ô∏è  Status: ${statusCode}`);
                }
                
            } catch (error) {
                console.log(`   ‚ùå Servidor n√£o est√° executando ou erro: ${error.message}`);
                console.log('   üí° Execute: npm run dev');
                break;
            }
            
            console.log('');
        }
        
        console.log('üéØ Teste conclu√≠do!');
        
    } catch (error) {
        console.error('‚ùå Erro no teste:', error);
    }
}

testProductPage(); 